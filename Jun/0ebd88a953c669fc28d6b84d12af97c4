WASHINGTON — The country has long endured a numbing succession of mass shootings at schools, places of worship and public gathering places. None forced Congress to react with significant legislation — until now. Last month, a white shooter was accused of racist motives in the killings of 10 Black people in a supermarket in Buffalo, New York. Another gunman killed 19 students and two teachers at an elementary school in Uvalde, Texas. The slayings of shoppers and school children just 10 days apart — innocents engaged in every day activities — helped prompt a visceral public demand for Congress to do something, lawmakers of both parties say. Bargainers produced a bipartisan gun violence bill that the Senate is moving toward approving later this week, with House action expected sometime afterward. Here’s a look at the confluence of factors that helped to produce a compromise. Republican motivation This is an election year. Republicans are favored to take over the House, now narrowly controlled by Democrats, and have a solid chance of capturing the 50-50 Senate. To reinforce their chances, Senate Minority Leader Mitch McConnell, R-Ky., knows they need to attract moderate voters like suburban women who will decide competitive races in states like Arizona, Georgia, Nevada and North Carolina. Taking steps aimed at reducing mass shootings helps the GOP demonstrate it is responsive and reasonable — an image tarnished by former President Donald Trump and the hard-right deniers of his 2020 election defeat. Underscoring the focus he prefers, McConnell lauded the gun agreement by pointedly telling reporters Wednesday that it takes significant steps to address “the two issues that I think it focuses on, school safety and mental health.” The bill would spend $8.6 billion on mental health programs and over $2 billion on safety and other improvements at schools, according to a cost estimate by the nonpartisan Congressional Budget Office. The analysts estimated its overall cost at around $13 billion, more than paid for by budget savings it also claims. But it also makes the juvenile records of gun buyers aged 18 to 20 part of background checks required to buy firearms, bars guns for convicted domestic abusers not married to or living with their victims and strengthens penalties for gun trafficking. It finances violence prevention programs and helps states implement laws that help authorities temporarily take guns from people deemed risky. Democrats want middle ground, too The measure lacks stronger curbs backed by Democrats like banning the assault-style rifles used in Buffalo, Uvalde and other massacres and the high-capacity ammunition magazines those shooters used. Senate Majority Leader Chuck Schumer, D-N.Y., said Wednesday that this time, Democrats decided they would not “hold a vote on a bill with many things we would want but that had no hope of getting passed.” That’s been the pattern for years. Democratic Sens. Chris Murphy of Connecticut and Kyrsten Sinema of Arizona, and Republican Sens. John Cornyn of Texas and Thom Tillis of North Carolina, led negotiators in talks that lasted four weeks. Their accord is Congress’ most important gun violence measure since the now-expired assault weapons ban enacted in 1993. For almost 30 years, “both parties sat in their respective corners, decided it was politically safer to do nothing than to take chances,” Murphy told reporters. He said Democrats needed to show “we were willing to put on the table some things that brought us out of our comfort zone.” Guns rights voters Gun rights defenders are disproportionately Republican, and the party crosses them at its own risk. Trump, possibly gearing up for a 2024 presidential run, issued a statement calling the compromise “the first step in the movement to TAKE YOUR GUNS AWAY.” McConnell took pains to say that the measure “does not so much as touch the rights of the overwhelming majority of American gun owners who are law-abiding citizens of sound mind.” Even so, the National Rifle Association and other pro-gun groups oppose the compromise in what will be a test of their influence. Supporting this legislation may not doom Republicans with pro-gun voters. McConnell and Cornyn have talked about GOP polling showing that gun owners overwhelmingly back many of the bill’s provisions. And those voters are likely to be angry about sky-high gasoline prices and inflation and could vote Republican anyway. Wins for both sides Around two-thirds of the Senate’s 50 Republicans are expected to oppose the gun measure. But congressional approval would be a GOP win by hindering Democrats from using gun violence in their campaigns, said Republican pollster Neil Newhouse. “Taking this off the table as a potential issue for Democrats puts the focus squarely back on inflation again and the economy,” Newhouse said. Not so, says Democratic pollster Geoffrey Garin. He said approval will let Democrats tout an accomplishment running Congress and demonstrate they can work across party lines. Democrats can still campaign against Republicans for opposing tougher measures like assault weapons curbs, issues where “Democrats clearly have the high political ground,” Garin said. Fourteen Republicans including Sen. Lisa Murkowski of Alaska voted Tuesday to move the legislation a step toward passage. It is probably telling that she and Indiana Sen. Todd Young were the only two facing reelection this fall. Three are retiring and eight including McConnell, Cornyn and Tillis don’t run again until 2026. What lawmakers heard Senators say they’ve been struck by a different mood back home. No. 2 Senate Democratic leader Richard Durbin of Illinois said some people he’s long known told him that “maybe it’s time to take my kids out of this country,” which he called incredible. “That they would even consider that possibility tells you how desperate families are” after the recent shootings. “What I heard for the first time was, ‘Do something,’” Murkowski said. “And it wasn’t, ‘Ban this, do that,’ it was, ‘Do something.’” That wasn’t true for everyone. Republican Sen. Steve Daines of Montana, where guns are widely popular, said of his constituents, “They want to make sure their Second Amendment rights are defended,” the constitutional provision that lets people keep firearms. By ALAN FRAM, with contribution from AP writer Susan Haigh in Hartford, Connecticut.